~/$ ONLINE/presign.sh tx/template2.xml
Enter the transaction ID (txid) of the outpoint that you want to spend from: 180d08561d4f85e22bfcde890a17f353250c302e995042a1e42b226984e3e9da
previoustxid: 180d08561d4f85e22bfcde890a17f353250c302e995042a1e42b226984e3e9da
In order to provide the following data, open you favourite block explorer (e.g. https://www.blockchain.com/btc/tx/180d08561d4f85e22bfcde890a17f353250c302e995042a1e42b226984e3e9da) in your (tor) browser.
Enter the (decimal) output INDEX of the outpoint that you want to spend from: 0
outpoint index: 00000000
Enter the bitcoin address (P2PKH format, starts with the letter '1') of the outpoint that you want to spend from: 1FaqXRmQiYyGizWS9fK3GN6Y9GeSxPyRt1
outpoint address: 1FaqXRmQiYyGizWS9fK3GN6Y9GeSxPyRt1
outpoint pubkeyhash: 9ff7fe77800570e8959bb953f4380ea442cb7f32
Enter the decimal value (in satoshis) of unspent transaction output (UTXO) of that outpoint: 1000
outpoint utxo: 1000
0) finish!
1) add an input (utxo)
#? 1
Enter the transaction ID (txid) of the outpoint that you want to spend from: 180d08561d4f85e22bfcde890a17f353250c302e995042a1e42b226984e3e9da
previoustxid: 180d08561d4f85e22bfcde890a17f353250c302e995042a1e42b226984e3e9da
In order to provide the following data, open you favourite block explorer (e.g. https://www.blockchain.com/btc/tx/180d08561d4f85e22bfcde890a17f353250c302e995042a1e42b226984e3e9da) in your (tor) browser.
Enter the (decimal) output INDEX of the outpoint that you want to spend from: 1
outpoint index: 01000000
Enter the bitcoin address (P2PKH format, starts with the letter '1') of the outpoint that you want to spend from: 1DESJbwXNkqbFWuTnygNnGWtzz85KNSfKm
outpoint address: 1DESJbwXNkqbFWuTnygNnGWtzz85KNSfKm
outpoint pubkeyhash: 862c0a08e5aa3e1ea796a85f9af376848c0352c7
Enter the decimal value (in satoshis) of unspent transaction output (UTXO) of that outpoint: 3000
outpoint utxo: 3000
0) finish!
1) add an input (utxo)
#? 1
Enter the transaction ID (txid) of the outpoint that you want to spend from: 18d7100c870deb63dec258282f5ff150ebc64e4497d107073503fb4343f4810d
previoustxid: 18d7100c870deb63dec258282f5ff150ebc64e4497d107073503fb4343f4810d
In order to provide the following data, open you favourite block explorer (e.g. https://www.blockchain.com/btc/tx/18d7100c870deb63dec258282f5ff150ebc64e4497d107073503fb4343f4810d) in your (tor) browser.
Enter the (decimal) output INDEX of the outpoint that you want to spend from: 0
outpoint index: 00000000
Enter the bitcoin address (P2PKH format, starts with the letter '1') of the outpoint that you want to spend from: 1HangpEdoDsSe5i3n7DQNbYie65PGGmPcq
outpoint address: 1HangpEdoDsSe5i3n7DQNbYie65PGGmPcq
outpoint pubkeyhash: b5e5e05c83c470ffd21c3330fb99a6a0101351ad
Enter the decimal value (in satoshis) of unspent transaction output (UTXO) of that outpoint: 800
outpoint utxo: 800
0) finish!
1) add an input (utxo)
#? 1
Enter the transaction ID (txid) of the outpoint that you want to spend from: 18d7100c870deb63dec258282f5ff150ebc64e4497d107073503fb4343f4810d
previoustxid: 18d7100c870deb63dec258282f5ff150ebc64e4497d107073503fb4343f4810d
In order to provide the following data, open you favourite block explorer (e.g. https://www.blockchain.com/btc/tx/18d7100c870deb63dec258282f5ff150ebc64e4497d107073503fb4343f4810d) in your (tor) browser.
Enter the (decimal) output INDEX of the outpoint that you want to spend from: 1
outpoint index: 01000000
Enter the bitcoin address (P2PKH format, starts with the letter '1') of the outpoint that you want to spend from: 1HaXuSmR7PXhR4GCcyvGC7USYDuDjw6FHw
outpoint address: 1HaXuSmR7PXhR4GCcyvGC7USYDuDjw6FHw
outpoint pubkeyhash: b5d9896cc07a30e1d739097df0c1d47181cbbe75
Enter the decimal value (in satoshis) of unspent transaction output (UTXO) of that outpoint: 900
outpoint utxo: 900
0) finish!
1) add an input (utxo)
#? 0
numberofinputs: 04
Enter the bitcoin address (P2PKH format, starts with the letter '1') of the recipient that you want to send to: 1DimgxZjRiRNryKjfV7AoZkJdgAWJp2rMb
[1] recipient address: 1DimgxZjRiRNryKjfV7AoZkJdgAWJp2rMb
[1] nextpubkeyhash: 8b87de479525eeea5af53cde43eafe3b5407072d
Enter the decimal amount of satoshis that the recipient should receive: 4000
[1] satoshis: 4000
0) finish!
1) add a recipient
#? 0
numberofoutputs: 01
totalsatoshis: 4000 (decimal)
fee: 1700
rawtransaction: 0100000004dae9e38469222be4a14250992e300c2553f3170a89defc2be2854f1d56080d18000000001976a9149ff7fe77800570e8959bb953f4380ea442cb7f3288acffffffffdae9e38469222be4a14250992e300c2553f3170a89defc2be2854f1d56080d18010000001976a914862c0a08e5aa3e1ea796a85f9af376848c0352c788acffffffff0d81f44343fb03350707d197444ec6eb50f15f2f2858c2de63eb0d870c10d718000000001976a914b5e5e05c83c470ffd21c3330fb99a6a0101351ad88acffffffff0d81f44343fb03350707d197444ec6eb50f15f2f2858c2de63eb0d870c10d718010000001976a914b5d9896cc07a30e1d739097df0c1d47181cbbe7588acffffffff01a00f0000000000001976a9148b87de479525eeea5af53cde43eafe3b5407072d88ac000000000100000001
rawtransactionhash: f48eaa4765638a6971a33d8e017912f4104212b4fd10b91726f9d1fbbf5c73f9
<txs type="P2PKH">
  <raw bits="32" desc="1. version">01000000</raw>
  <raw bits="8" desc="2. varint specifying the number of inputs">04</raw>
  <txin>
    <raw bits="256" id="180d08561d4f85e22bfcde890a17f353250c302e995042a1e42b226984e3e9da" desc="3. transaction id from which we want to redeem an output (reverse order of @id)">dae9e38469222be4a14250992e300c2553f3170a89defc2be2854f1d56080d18</raw>
    <outputs>
      <output address="1FaqXRmQiYyGizWS9fK3GN6Y9GeSxPyRt1" value="1000" desc="(provide BTC address and decimal value in satoshis)">
        <raw bits="32" desc="4. output index we want to redeem from the transaction">00000000</raw>
        <raw bits="8" nullvalue="00" desc="5. For the purpose of signing the transaction, length of scriptPubKey of the outpoint. After signing, length of sigscript">19</raw>
        <pkscript>
          <raw bits="8" desc="OP_DUP">76</raw>
          <raw bits="8" desc="OP_HASH160">a9</raw>
          <raw bits="8" desc="push 0x14 bytes">14</raw>
          <raw bits="160" desc="(pubkeyhash)">9ff7fe77800570e8959bb953f4380ea442cb7f32</raw>
          <raw bits="8" desc="OP_EQUALVERIFY">88</raw>
          <raw bits="8" desc="OP_CHECKSIG">ac</raw>
        </pkscript>
        <raw bits="32" desc="7. sequence. This is currently always set to 0xffffffff">ffffffff</raw>
      </output>
    </outputs>
  </txin>
  <txin>
    <raw bits="256" id="180d08561d4f85e22bfcde890a17f353250c302e995042a1e42b226984e3e9da" desc="3. transaction id from which we want to redeem an output (reverse order of @id)">dae9e38469222be4a14250992e300c2553f3170a89defc2be2854f1d56080d18</raw>
    <outputs>
      <output address="1DESJbwXNkqbFWuTnygNnGWtzz85KNSfKm" value="3000" desc="(provide BTC address and decimal value in satoshis)">
        <raw bits="32" desc="4. output index we want to redeem from the transaction">01000000</raw>
        <raw bits="8" nullvalue="00" desc="5. For the purpose of signing the transaction, length of scriptPubKey of the outpoint. After signing, length of sigscript">19</raw>
        <pkscript>
          <raw bits="8" desc="OP_DUP">76</raw>
          <raw bits="8" desc="OP_HASH160">a9</raw>
          <raw bits="8" desc="push 0x14 bytes">14</raw>
          <raw bits="160" desc="(pubkeyhash)">862c0a08e5aa3e1ea796a85f9af376848c0352c7</raw>
          <raw bits="8" desc="OP_EQUALVERIFY">88</raw>
          <raw bits="8" desc="OP_CHECKSIG">ac</raw>
        </pkscript>
        <raw bits="32" desc="7. sequence. This is currently always set to 0xffffffff">ffffffff</raw>
      </output>
    </outputs>
  </txin>
  <txin>
    <raw bits="256" id="18d7100c870deb63dec258282f5ff150ebc64e4497d107073503fb4343f4810d" desc="3. transaction id from which we want to redeem an output (reverse order of @id)">0d81f44343fb03350707d197444ec6eb50f15f2f2858c2de63eb0d870c10d718</raw>
    <outputs>
      <output address="1HangpEdoDsSe5i3n7DQNbYie65PGGmPcq" value="800" desc="(provide BTC address and decimal value in satoshis)">
        <raw bits="32" desc="4. output index we want to redeem from the transaction">00000000</raw>
        <raw bits="8" nullvalue="00" desc="5. For the purpose of signing the transaction, length of scriptPubKey of the outpoint. After signing, length of sigscript">19</raw>
        <pkscript>
          <raw bits="8" desc="OP_DUP">76</raw>
          <raw bits="8" desc="OP_HASH160">a9</raw>
          <raw bits="8" desc="push 0x14 bytes">14</raw>
          <raw bits="160" desc="(pubkeyhash)">b5e5e05c83c470ffd21c3330fb99a6a0101351ad</raw>
          <raw bits="8" desc="OP_EQUALVERIFY">88</raw>
          <raw bits="8" desc="OP_CHECKSIG">ac</raw>
        </pkscript>
        <raw bits="32" desc="7. sequence. This is currently always set to 0xffffffff">ffffffff</raw>
      </output>
    </outputs>
  </txin>
  <txin>
    <raw bits="256" id="18d7100c870deb63dec258282f5ff150ebc64e4497d107073503fb4343f4810d" desc="3. transaction id from which we want to redeem an output (reverse order of @id)">0d81f44343fb03350707d197444ec6eb50f15f2f2858c2de63eb0d870c10d718</raw>
    <outputs>
      <output address="1HaXuSmR7PXhR4GCcyvGC7USYDuDjw6FHw" value="900" desc="(provide BTC address and decimal value in satoshis)">
        <raw bits="32" desc="4. output index we want to redeem from the transaction">01000000</raw>
        <raw bits="8" nullvalue="00" desc="5. For the purpose of signing the transaction, length of scriptPubKey of the outpoint. After signing, length of sigscript">19</raw>
        <pkscript>
          <raw bits="8" desc="OP_DUP">76</raw>
          <raw bits="8" desc="OP_HASH160">a9</raw>
          <raw bits="8" desc="push 0x14 bytes">14</raw>
          <raw bits="160" desc="(pubkeyhash)">b5d9896cc07a30e1d739097df0c1d47181cbbe75</raw>
          <raw bits="8" desc="OP_EQUALVERIFY">88</raw>
          <raw bits="8" desc="OP_CHECKSIG">ac</raw>
        </pkscript>
        <raw bits="32" desc="7. sequence. This is currently always set to 0xffffffff">ffffffff</raw>
      </output>
    </outputs>
  </txin>
  <txout>
    <outputs>
      <raw bits="8" desc="8. varint containing the number of outputs in our new transaction">01</raw>
      <output address="1DimgxZjRiRNryKjfV7AoZkJdgAWJp2rMb" value="4000" desc="(provide BTC address and decimal value in satoshis)">
        <raw bits="64" desc="9. (64 bit integer, little-endian) amount (in satoshis) we want to redeem from the specified outputs for this recipient address">a00f000000000000</raw>
        <raw bits="8" desc="10. length of the output script (0x19)">19</raw>
        <pkscript>
          <raw bits="8" desc="11. (OP_DUP)">76</raw>
          <raw bits="8" desc="11. (OP_HASH160)">a9</raw>
          <raw bits="8" desc="11. (push hex 0x14 bytes on stack)">14</raw>
          <raw bits="160" desc="11. Then we write the pubkeyhash of the recipient">8b87de479525eeea5af53cde43eafe3b5407072d</raw>
          <raw bits="8" desc="11. (OP_EQUALVERIFY)">88</raw>
          <raw bits="8" desc="11. (OP_CHECKSIG)">ac</raw>
        </pkscript>
      </output>
      <raw bits="32" desc="12. lock time">00000000</raw>
      <raw iteration="1" bits="32" desc="13. Iteration 1: hash code type / Iteration 2: We finish off by removing the four-byte hash code type we added in step 13">01000000</raw>
    </outputs>
  </txout>
  <template>
    <sigscript desc="14. double-SHA256 hash this entire structure (from iteration 1). This will be the input to the signing.">
      <raw bits="8" desc="16. OPCODE containing the length of the DER-encoded signature plus the one-byte hash code type"/>
      <raw bits="?" desc="15. create ECDSA signature"/>
      <raw bits="8" desc="16. hash code type (SIGHASH_ALL)">01</raw>
      <raw bits="8" desc="16. OPCODE containing the length of the public key of signer"/>
      <raw bits="264-520" desc="16. public key of signer"/>
    </sigscript>
  </template>
</txs>
Above you see the content of xml file: /tmp/tmp.8PfA1oVFYV
Copy that xml file to your OFFLINE computer (the computer where your private keys are securely stored) for transaction signing with offline/sign.sh


~/$ <<<KwQXQy1vAyWa8rxgaNe7pq25p62fM2HqpEuf4JAKUGuZRub3EEvX offline/sign2.sh /tmp/tmp.8PfA1oVFYV 1
Press ctrl-d when you are done entering the private key in wallet input format (ignore this message if you've piped the private key through STDIN)
totalsatoshis: 4000 (decimal)
fee: 1700
rawtransaction: 0100000004dae9e38469222be4a14250992e300c2553f3170a89defc2be2854f1d56080d18000000001976a9149ff7fe77800570e8959bb953f4380ea442cb7f3288acffffffffdae9e38469222be4a14250992e300c2553f3170a89defc2be2854f1d56080d180100000000ffffffff0d81f44343fb03350707d197444ec6eb50f15f2f2858c2de63eb0d870c10d7180000000000ffffffff0d81f44343fb03350707d197444ec6eb50f15f2f2858c2de63eb0d870c10d7180100000000ffffffff01a00f0000000000001976a9148b87de479525eeea5af53cde43eafe3b5407072d88ac0000000001000000
rawtransactionhash: 0bdaaa610041743ac305723b75d8b39d97ddb4c8d7814177d0c78c646d98332c
signedrawtransaction: 304402207ab181921502cdca970147312b22fc7391a411f099ba4f2321bd9c2b3a9b3e8f02205f3213af78fdca8a90fb9e5e8f22d6158834572017d415e86787b3961ad32bed
publickey: 03626147c2b5ee2efd660c313f6def44665c7260e69b1a4144946e8bc6efe89034
verifytransaction: Signature Verified Successfully
sigscript: 47304402207ab181921502cdca970147312b22fc7391a411f099ba4f2321bd9c2b3a9b3e8f02205f3213af78fdca8a90fb9e5e8f22d6158834572017d415e86787b3961ad32bed012103626147c2b5ee2efd660c313f6def44665c7260e69b1a4144946e8bc6efe89034
<txs type="P2PKH">
  <raw bits="32" desc="1. version">01000000</raw>
  <raw bits="8" desc="2. varint specifying the number of inputs">04</raw>
  <txin>
    <raw bits="256" id="180d08561d4f85e22bfcde890a17f353250c302e995042a1e42b226984e3e9da" desc="3. transaction id from which we want to redeem an output (reverse order of @id)">dae9e38469222be4a14250992e300c2553f3170a89defc2be2854f1d56080d18</raw>
    <outputs>
      <output address="1FaqXRmQiYyGizWS9fK3GN6Y9GeSxPyRt1" value="1000" desc="(provide BTC address and decimal value in satoshis)">
        <raw bits="32" desc="4. output index we want to redeem from the transaction">00000000</raw>
        <raw bits="8" nullvalue="00" desc="5. For the purpose of signing the transaction, length of scriptPubKey of the outpoint. After signing, length of sigscript">6a</raw>
        <pkscript>
          <raw bits="8" desc="OP_DUP">76</raw>
          <raw bits="8" desc="OP_HASH160">a9</raw>
          <raw bits="8" desc="push 0x14 bytes">14</raw>
          <raw bits="160" desc="(pubkeyhash)">9ff7fe77800570e8959bb953f4380ea442cb7f32</raw>
          <raw bits="8" desc="OP_EQUALVERIFY">88</raw>
          <raw bits="8" desc="OP_CHECKSIG">ac</raw>
        </pkscript>
        <sigscript>
          <raw bits="8" desc="16. OPCODE containing the length of the DER-encoded signature plus the one-byte hash code type">47</raw>
          <raw bits="?" desc="15. create ECDSA signature">304402207ab181921502cdca970147312b22fc7391a411f099ba4f2321bd9c2b3a9b3e8f02205f3213af78fdca8a90fb9e5e8f22d6158834572017d415e86787b3961ad32bed</raw>
          <raw bits="8" desc="16. hash code type (SIGHASH_ALL)">01</raw>
          <raw bits="8" desc="16. OPCODE containing the length of the public key of signer">21</raw>
          <raw bits="264-520" desc="16. public key of signer">03626147c2b5ee2efd660c313f6def44665c7260e69b1a4144946e8bc6efe89034</raw>
        </sigscript>
        <raw bits="32" desc="7. sequence. This is currently always set to 0xffffffff">ffffffff</raw>
      </output>
    </outputs>
  </txin>
  <txin>
    <raw bits="256" id="180d08561d4f85e22bfcde890a17f353250c302e995042a1e42b226984e3e9da" desc="3. transaction id from which we want to redeem an output (reverse order of @id)">dae9e38469222be4a14250992e300c2553f3170a89defc2be2854f1d56080d18</raw>
    <outputs>
      <output address="1DESJbwXNkqbFWuTnygNnGWtzz85KNSfKm" value="3000" desc="(provide BTC address and decimal value in satoshis)">
        <raw bits="32" desc="4. output index we want to redeem from the transaction">01000000</raw>
        <raw bits="8" nullvalue="00" desc="5. For the purpose of signing the transaction, length of scriptPubKey of the outpoint. After signing, length of sigscript">19</raw>
        <pkscript>
          <raw bits="8" desc="OP_DUP">76</raw>
          <raw bits="8" desc="OP_HASH160">a9</raw>
          <raw bits="8" desc="push 0x14 bytes">14</raw>
          <raw bits="160" desc="(pubkeyhash)">862c0a08e5aa3e1ea796a85f9af376848c0352c7</raw>
          <raw bits="8" desc="OP_EQUALVERIFY">88</raw>
          <raw bits="8" desc="OP_CHECKSIG">ac</raw>
        </pkscript>
        <raw bits="32" desc="7. sequence. This is currently always set to 0xffffffff">ffffffff</raw>
      </output>
    </outputs>
  </txin>
  <txin>
    <raw bits="256" id="18d7100c870deb63dec258282f5ff150ebc64e4497d107073503fb4343f4810d" desc="3. transaction id from which we want to redeem an output (reverse order of @id)">0d81f44343fb03350707d197444ec6eb50f15f2f2858c2de63eb0d870c10d718</raw>
    <outputs>
      <output address="1HangpEdoDsSe5i3n7DQNbYie65PGGmPcq" value="800" desc="(provide BTC address and decimal value in satoshis)">
        <raw bits="32" desc="4. output index we want to redeem from the transaction">00000000</raw>
        <raw bits="8" nullvalue="00" desc="5. For the purpose of signing the transaction, length of scriptPubKey of the outpoint. After signing, length of sigscript">19</raw>
        <pkscript>
          <raw bits="8" desc="OP_DUP">76</raw>
          <raw bits="8" desc="OP_HASH160">a9</raw>
          <raw bits="8" desc="push 0x14 bytes">14</raw>
          <raw bits="160" desc="(pubkeyhash)">b5e5e05c83c470ffd21c3330fb99a6a0101351ad</raw>
          <raw bits="8" desc="OP_EQUALVERIFY">88</raw>
          <raw bits="8" desc="OP_CHECKSIG">ac</raw>
        </pkscript>
        <raw bits="32" desc="7. sequence. This is currently always set to 0xffffffff">ffffffff</raw>
      </output>
    </outputs>
  </txin>
  <txin>
    <raw bits="256" id="18d7100c870deb63dec258282f5ff150ebc64e4497d107073503fb4343f4810d" desc="3. transaction id from which we want to redeem an output (reverse order of @id)">0d81f44343fb03350707d197444ec6eb50f15f2f2858c2de63eb0d870c10d718</raw>
    <outputs>
      <output address="1HaXuSmR7PXhR4GCcyvGC7USYDuDjw6FHw" value="900" desc="(provide BTC address and decimal value in satoshis)">
        <raw bits="32" desc="4. output index we want to redeem from the transaction">01000000</raw>
        <raw bits="8" nullvalue="00" desc="5. For the purpose of signing the transaction, length of scriptPubKey of the outpoint. After signing, length of sigscript">19</raw>
        <pkscript>
          <raw bits="8" desc="OP_DUP">76</raw>
          <raw bits="8" desc="OP_HASH160">a9</raw>
          <raw bits="8" desc="push 0x14 bytes">14</raw>
          <raw bits="160" desc="(pubkeyhash)">b5d9896cc07a30e1d739097df0c1d47181cbbe75</raw>
          <raw bits="8" desc="OP_EQUALVERIFY">88</raw>
          <raw bits="8" desc="OP_CHECKSIG">ac</raw>
        </pkscript>
        <raw bits="32" desc="7. sequence. This is currently always set to 0xffffffff">ffffffff</raw>
      </output>
    </outputs>
  </txin>
  <txout>
    <outputs>
      <raw bits="8" desc="8. varint containing the number of outputs in our new transaction">01</raw>
      <output address="1DimgxZjRiRNryKjfV7AoZkJdgAWJp2rMb" value="4000" desc="(provide BTC address and decimal value in satoshis)">
        <raw bits="64" desc="9. (64 bit integer, little-endian) amount (in satoshis) we want to redeem from the specified outputs for this recipient address">a00f000000000000</raw>
        <raw bits="8" desc="10. length of the output script (0x19)">19</raw>
        <pkscript>
          <raw bits="8" desc="11. (OP_DUP)">76</raw>
          <raw bits="8" desc="11. (OP_HASH160)">a9</raw>
          <raw bits="8" desc="11. (push hex 0x14 bytes on stack)">14</raw>
          <raw bits="160" desc="11. Then we write the pubkeyhash of the recipient">8b87de479525eeea5af53cde43eafe3b5407072d</raw>
          <raw bits="8" desc="11. (OP_EQUALVERIFY)">88</raw>
          <raw bits="8" desc="11. (OP_CHECKSIG)">ac</raw>
        </pkscript>
      </output>
      <raw bits="32" desc="12. lock time">00000000</raw>
      <raw iteration="1" bits="32" desc="13. Iteration 1: hash code type / Iteration 2: We finish off by removing the four-byte hash code type we added in step 13">01000000</raw>
    </outputs>
  </txout>
  <template>
    <sigscript desc="14. double-SHA256 hash this entire structure (from iteration 1). This will be the input to the signing.">
      <raw bits="8" desc="16. OPCODE containing the length of the DER-encoded signature plus the one-byte hash code type"/>
      <raw bits="?" desc="15. create ECDSA signature"/>
      <raw bits="8" desc="16. hash code type (SIGHASH_ALL)">01</raw>
      <raw bits="8" desc="16. OPCODE containing the length of the public key of signer"/>
      <raw bits="264-520" desc="16. public key of signer"/>
    </sigscript>
  </template>
</txs>
Above you see the content of xml file: /tmp/tmp.vc1IutXSpK
txid: c156c745c146d053a4988c43733ffcf0a957e135b451af7378825a33c61122a0
signedtransaction: 0100000004dae9e38469222be4a14250992e300c2553f3170a89defc2be2854f1d56080d18000000006a47304402207ab181921502cdca970147312b22fc7391a411f099ba4f2321bd9c2b3a9b3e8f02205f3213af78fdca8a90fb9e5e8f22d6158834572017d415e86787b3961ad32bed012103626147c2b5ee2efd660c313f6def44665c7260e69b1a4144946e8bc6efe89034ffffffffdae9e38469222be4a14250992e300c2553f3170a89defc2be2854f1d56080d18010000001976a914862c0a08e5aa3e1ea796a85f9af376848c0352c788acffffffff0d81f44343fb03350707d197444ec6eb50f15f2f2858c2de63eb0d870c10d718000000001976a914b5e5e05c83c470ffd21c3330fb99a6a0101351ad88acffffffff0d81f44343fb03350707d197444ec6eb50f15f2f2858c2de63eb0d870c10d718010000001976a914b5d9896cc07a30e1d739097df0c1d47181cbbe7588acffffffff01a00f0000000000001976a9148b87de479525eeea5af53cde43eafe3b5407072d88ac00000000                                                                                                                                                                                                                                           
For verification, paste your signedtransaction into https://blockchain.com/btc/decode-tx and check if everything looks as you planned.
After verification, paste your signedtransaction into https://blockchain.com/btc/pushtx to broadcast it.
Once you have successfully broadcast your tansaction, watch its status on the blockchain: https://blockchain.com/btc/tx/c156c745c146d053a4988c43733ffcf0a957e135b451af7378825a33c61122a0.

~/$ <<<Kxoh959Q4ebFeaFTjp5dxQXSKb4V7odjrzn3AHEsidPXjsx4yhDG offline/sign2.sh /tmp/tmp.vc1IutXSpK 2
Press ctrl-d when you are done entering the private key in wallet input format (ignore this message if you've piped the private key through STDIN)
totalsatoshis: 4000 (decimal)
fee: 1700
rawtransaction: 0100000004dae9e38469222be4a14250992e300c2553f3170a89defc2be2854f1d56080d180000000000ffffffffdae9e38469222be4a14250992e300c2553f3170a89defc2be2854f1d56080d18010000001976a914862c0a08e5aa3e1ea796a85f9af376848c0352c788acffffffff0d81f44343fb03350707d197444ec6eb50f15f2f2858c2de63eb0d870c10d7180000000000ffffffff0d81f44343fb03350707d197444ec6eb50f15f2f2858c2de63eb0d870c10d7180100000000ffffffff01a00f0000000000001976a9148b87de479525eeea5af53cde43eafe3b5407072d88ac0000000001000000
rawtransactionhash: 73ecc36a43c50d2952516c625225633c030930eee8892d7a50dfe7033893873c
signedrawtransaction: 3044022003d84a2c43eb4d70c6308b018c0ad807a59ebef5bd04759d762fcdb81792073c02205e81c012a6278b38aa75ba656187c1ec27dd2652c2de44ce991d696af15db1ec
publickey: 03f36bd219c0109194ef262a83db8a725f2e96ae316d55104d7c9665a401b3f552
verifytransaction: Signature Verified Successfully
sigscript: 473044022003d84a2c43eb4d70c6308b018c0ad807a59ebef5bd04759d762fcdb81792073c02205e81c012a6278b38aa75ba656187c1ec27dd2652c2de44ce991d696af15db1ec012103f36bd219c0109194ef262a83db8a725f2e96ae316d55104d7c9665a401b3f552
<txs type="P2PKH">
  <raw bits="32" desc="1. version">01000000</raw>
  <raw bits="8" desc="2. varint specifying the number of inputs">04</raw>
  <txin>
    <raw bits="256" id="180d08561d4f85e22bfcde890a17f353250c302e995042a1e42b226984e3e9da" desc="3. transaction id from which we want to redeem an output (reverse order of @id)">dae9e38469222be4a14250992e300c2553f3170a89defc2be2854f1d56080d18</raw>
    <outputs>
      <output address="1FaqXRmQiYyGizWS9fK3GN6Y9GeSxPyRt1" value="1000" desc="(provide BTC address and decimal value in satoshis)">
        <raw bits="32" desc="4. output index we want to redeem from the transaction">00000000</raw>
        <raw bits="8" nullvalue="00" desc="5. For the purpose of signing the transaction, length of scriptPubKey of the outpoint. After signing, length of sigscript">6a</raw>
        <pkscript>
          <raw bits="8" desc="OP_DUP">76</raw>
          <raw bits="8" desc="OP_HASH160">a9</raw>
          <raw bits="8" desc="push 0x14 bytes">14</raw>
          <raw bits="160" desc="(pubkeyhash)">9ff7fe77800570e8959bb953f4380ea442cb7f32</raw>
          <raw bits="8" desc="OP_EQUALVERIFY">88</raw>
          <raw bits="8" desc="OP_CHECKSIG">ac</raw>
        </pkscript>
        <sigscript>
          <raw bits="8" desc="16. OPCODE containing the length of the DER-encoded signature plus the one-byte hash code type">47</raw>
          <raw bits="?" desc="15. create ECDSA signature">304402207ab181921502cdca970147312b22fc7391a411f099ba4f2321bd9c2b3a9b3e8f02205f3213af78fdca8a90fb9e5e8f22d6158834572017d415e86787b3961ad32bed</raw>
          <raw bits="8" desc="16. hash code type (SIGHASH_ALL)">01</raw>
          <raw bits="8" desc="16. OPCODE containing the length of the public key of signer">21</raw>
          <raw bits="264-520" desc="16. public key of signer">03626147c2b5ee2efd660c313f6def44665c7260e69b1a4144946e8bc6efe89034</raw>
        </sigscript>
        <raw bits="32" desc="7. sequence. This is currently always set to 0xffffffff">ffffffff</raw>
      </output>
    </outputs>
  </txin>
  <txin>
    <raw bits="256" id="180d08561d4f85e22bfcde890a17f353250c302e995042a1e42b226984e3e9da" desc="3. transaction id from which we want to redeem an output (reverse order of @id)">dae9e38469222be4a14250992e300c2553f3170a89defc2be2854f1d56080d18</raw>
    <outputs>
      <output address="1DESJbwXNkqbFWuTnygNnGWtzz85KNSfKm" value="3000" desc="(provide BTC address and decimal value in satoshis)">
        <raw bits="32" desc="4. output index we want to redeem from the transaction">01000000</raw>
        <raw bits="8" nullvalue="00" desc="5. For the purpose of signing the transaction, length of scriptPubKey of the outpoint. After signing, length of sigscript">6a</raw>
        <pkscript>
          <raw bits="8" desc="OP_DUP">76</raw>
          <raw bits="8" desc="OP_HASH160">a9</raw>
          <raw bits="8" desc="push 0x14 bytes">14</raw>
          <raw bits="160" desc="(pubkeyhash)">862c0a08e5aa3e1ea796a85f9af376848c0352c7</raw>
          <raw bits="8" desc="OP_EQUALVERIFY">88</raw>
          <raw bits="8" desc="OP_CHECKSIG">ac</raw>
        </pkscript>
        <sigscript>
          <raw bits="8" desc="16. OPCODE containing the length of the DER-encoded signature plus the one-byte hash code type">47</raw>
          <raw bits="?" desc="15. create ECDSA signature">3044022003d84a2c43eb4d70c6308b018c0ad807a59ebef5bd04759d762fcdb81792073c02205e81c012a6278b38aa75ba656187c1ec27dd2652c2de44ce991d696af15db1ec</raw>
          <raw bits="8" desc="16. hash code type (SIGHASH_ALL)">01</raw>
          <raw bits="8" desc="16. OPCODE containing the length of the public key of signer">21</raw>
          <raw bits="264-520" desc="16. public key of signer">03f36bd219c0109194ef262a83db8a725f2e96ae316d55104d7c9665a401b3f552</raw>
        </sigscript>
        <raw bits="32" desc="7. sequence. This is currently always set to 0xffffffff">ffffffff</raw>
      </output>
    </outputs>
  </txin>
  <txin>
    <raw bits="256" id="18d7100c870deb63dec258282f5ff150ebc64e4497d107073503fb4343f4810d" desc="3. transaction id from which we want to redeem an output (reverse order of @id)">0d81f44343fb03350707d197444ec6eb50f15f2f2858c2de63eb0d870c10d718</raw>
    <outputs>
      <output address="1HangpEdoDsSe5i3n7DQNbYie65PGGmPcq" value="800" desc="(provide BTC address and decimal value in satoshis)">
        <raw bits="32" desc="4. output index we want to redeem from the transaction">00000000</raw>
        <raw bits="8" nullvalue="00" desc="5. For the purpose of signing the transaction, length of scriptPubKey of the outpoint. After signing, length of sigscript">19</raw>
        <pkscript>
          <raw bits="8" desc="OP_DUP">76</raw>
          <raw bits="8" desc="OP_HASH160">a9</raw>
          <raw bits="8" desc="push 0x14 bytes">14</raw>
          <raw bits="160" desc="(pubkeyhash)">b5e5e05c83c470ffd21c3330fb99a6a0101351ad</raw>
          <raw bits="8" desc="OP_EQUALVERIFY">88</raw>
          <raw bits="8" desc="OP_CHECKSIG">ac</raw>
        </pkscript>
        <raw bits="32" desc="7. sequence. This is currently always set to 0xffffffff">ffffffff</raw>
      </output>
    </outputs>
  </txin>
  <txin>
    <raw bits="256" id="18d7100c870deb63dec258282f5ff150ebc64e4497d107073503fb4343f4810d" desc="3. transaction id from which we want to redeem an output (reverse order of @id)">0d81f44343fb03350707d197444ec6eb50f15f2f2858c2de63eb0d870c10d718</raw>
    <outputs>
      <output address="1HaXuSmR7PXhR4GCcyvGC7USYDuDjw6FHw" value="900" desc="(provide BTC address and decimal value in satoshis)">
        <raw bits="32" desc="4. output index we want to redeem from the transaction">01000000</raw>
        <raw bits="8" nullvalue="00" desc="5. For the purpose of signing the transaction, length of scriptPubKey of the outpoint. After signing, length of sigscript">19</raw>
        <pkscript>
          <raw bits="8" desc="OP_DUP">76</raw>
          <raw bits="8" desc="OP_HASH160">a9</raw>
          <raw bits="8" desc="push 0x14 bytes">14</raw>
          <raw bits="160" desc="(pubkeyhash)">b5d9896cc07a30e1d739097df0c1d47181cbbe75</raw>
          <raw bits="8" desc="OP_EQUALVERIFY">88</raw>
          <raw bits="8" desc="OP_CHECKSIG">ac</raw>
        </pkscript>
        <raw bits="32" desc="7. sequence. This is currently always set to 0xffffffff">ffffffff</raw>
      </output>
    </outputs>
  </txin>
  <txout>
    <outputs>
      <raw bits="8" desc="8. varint containing the number of outputs in our new transaction">01</raw>
      <output address="1DimgxZjRiRNryKjfV7AoZkJdgAWJp2rMb" value="4000" desc="(provide BTC address and decimal value in satoshis)">
        <raw bits="64" desc="9. (64 bit integer, little-endian) amount (in satoshis) we want to redeem from the specified outputs for this recipient address">a00f000000000000</raw>
        <raw bits="8" desc="10. length of the output script (0x19)">19</raw>
        <pkscript>
          <raw bits="8" desc="11. (OP_DUP)">76</raw>
          <raw bits="8" desc="11. (OP_HASH160)">a9</raw>
          <raw bits="8" desc="11. (push hex 0x14 bytes on stack)">14</raw>
          <raw bits="160" desc="11. Then we write the pubkeyhash of the recipient">8b87de479525eeea5af53cde43eafe3b5407072d</raw>
          <raw bits="8" desc="11. (OP_EQUALVERIFY)">88</raw>
          <raw bits="8" desc="11. (OP_CHECKSIG)">ac</raw>
        </pkscript>
      </output>
      <raw bits="32" desc="12. lock time">00000000</raw>
      <raw iteration="1" bits="32" desc="13. Iteration 1: hash code type / Iteration 2: We finish off by removing the four-byte hash code type we added in step 13">01000000</raw>
    </outputs>
  </txout>
  <template>
    <sigscript desc="14. double-SHA256 hash this entire structure (from iteration 1). This will be the input to the signing.">
      <raw bits="8" desc="16. OPCODE containing the length of the DER-encoded signature plus the one-byte hash code type"/>
      <raw bits="?" desc="15. create ECDSA signature"/>
      <raw bits="8" desc="16. hash code type (SIGHASH_ALL)">01</raw>
      <raw bits="8" desc="16. OPCODE containing the length of the public key of signer"/>
      <raw bits="264-520" desc="16. public key of signer"/>
    </sigscript>
  </template>
</txs>
Above you see the content of xml file: /tmp/tmp.AMZKRLLMWa
txid: f80124ce2ef25c03435396d386bba6a5239c376d8290aba6af2d83f429961abb
signedtransaction: 0100000004dae9e38469222be4a14250992e300c2553f3170a89defc2be2854f1d56080d18000000006a47304402207ab181921502cdca970147312b22fc7391a411f099ba4f2321bd9c2b3a9b3e8f02205f3213af78fdca8a90fb9e5e8f22d6158834572017d415e86787b3961ad32bed012103626147c2b5ee2efd660c313f6def44665c7260e69b1a4144946e8bc6efe89034ffffffffdae9e38469222be4a14250992e300c2553f3170a89defc2be2854f1d56080d18010000006a473044022003d84a2c43eb4d70c6308b018c0ad807a59ebef5bd04759d762fcdb81792073c02205e81c012a6278b38aa75ba656187c1ec27dd2652c2de44ce991d696af15db1ec012103f36bd219c0109194ef262a83db8a725f2e96ae316d55104d7c9665a401b3f552ffffffff0d81f44343fb03350707d197444ec6eb50f15f2f2858c2de63eb0d870c10d718000000001976a914b5e5e05c83c470ffd21c3330fb99a6a0101351ad88acffffffff0d81f44343fb03350707d197444ec6eb50f15f2f2858c2de63eb0d870c10d718010000001976a914b5d9896cc07a30e1d739097df0c1d47181cbbe7588acffffffff01a00f0000000000001976a9148b87de479525eeea5af53cde43eafe3b5407072d88ac00000000                                                                         
For verification, paste your signedtransaction into https://blockchain.com/btc/decode-tx and check if everything looks as you planned.
After verification, paste your signedtransaction into https://blockchain.com/btc/pushtx to broadcast it.
Once you have successfully broadcast your tansaction, watch its status on the blockchain: https://blockchain.com/btc/tx/f80124ce2ef25c03435396d386bba6a5239c376d8290aba6af2d83f429961abb.

~/$ <<<KxnuqfzMdjhLWuyhWWG6izAjgFXqLBfR5ojzXJZbanRHjohiY9QV offline/sign2.sh /tmp/tmp.AMZKRLLMWa 3
Press ctrl-d when you are done entering the private key in wallet input format (ignore this message if you've piped the private key through STDIN)
totalsatoshis: 4000 (decimal)
fee: 1700
rawtransaction: 0100000004dae9e38469222be4a14250992e300c2553f3170a89defc2be2854f1d56080d180000000000ffffffffdae9e38469222be4a14250992e300c2553f3170a89defc2be2854f1d56080d180100000000ffffffff0d81f44343fb03350707d197444ec6eb50f15f2f2858c2de63eb0d870c10d718000000001976a914b5e5e05c83c470ffd21c3330fb99a6a0101351ad88acffffffff0d81f44343fb03350707d197444ec6eb50f15f2f2858c2de63eb0d870c10d7180100000000ffffffff01a00f0000000000001976a9148b87de479525eeea5af53cde43eafe3b5407072d88ac0000000001000000
rawtransactionhash: 8a2559e18a7abeb912c8697fc3cb02066d07052e5475d4170d48285cc7ac9794
signedrawtransaction: 304402207d5aba19cadebfd3c4077c083b78da641ae3cf8b007437a30f6fc4ce394e7a3e022040f1169b6a61f869b2eeba93e41367f852fcee6b0b29beaf726f6a3f8a00c658
publickey: 036330ff88c4066c4b9f724140eeb58f876fd4221bed999a5a149cdbbf1b32687f
verifytransaction: Signature Verified Successfully
sigscript: 47304402207d5aba19cadebfd3c4077c083b78da641ae3cf8b007437a30f6fc4ce394e7a3e022040f1169b6a61f869b2eeba93e41367f852fcee6b0b29beaf726f6a3f8a00c6580121036330ff88c4066c4b9f724140eeb58f876fd4221bed999a5a149cdbbf1b32687f
<txs type="P2PKH">
  <raw bits="32" desc="1. version">01000000</raw>
  <raw bits="8" desc="2. varint specifying the number of inputs">04</raw>
  <txin>
    <raw bits="256" id="180d08561d4f85e22bfcde890a17f353250c302e995042a1e42b226984e3e9da" desc="3. transaction id from which we want to redeem an output (reverse order of @id)">dae9e38469222be4a14250992e300c2553f3170a89defc2be2854f1d56080d18</raw>
    <outputs>
      <output address="1FaqXRmQiYyGizWS9fK3GN6Y9GeSxPyRt1" value="1000" desc="(provide BTC address and decimal value in satoshis)">
        <raw bits="32" desc="4. output index we want to redeem from the transaction">00000000</raw>
        <raw bits="8" nullvalue="00" desc="5. For the purpose of signing the transaction, length of scriptPubKey of the outpoint. After signing, length of sigscript">6a</raw>
        <pkscript>
          <raw bits="8" desc="OP_DUP">76</raw>
          <raw bits="8" desc="OP_HASH160">a9</raw>
          <raw bits="8" desc="push 0x14 bytes">14</raw>
          <raw bits="160" desc="(pubkeyhash)">9ff7fe77800570e8959bb953f4380ea442cb7f32</raw>
          <raw bits="8" desc="OP_EQUALVERIFY">88</raw>
          <raw bits="8" desc="OP_CHECKSIG">ac</raw>
        </pkscript>
        <sigscript>
          <raw bits="8" desc="16. OPCODE containing the length of the DER-encoded signature plus the one-byte hash code type">47</raw>
          <raw bits="?" desc="15. create ECDSA signature">304402207ab181921502cdca970147312b22fc7391a411f099ba4f2321bd9c2b3a9b3e8f02205f3213af78fdca8a90fb9e5e8f22d6158834572017d415e86787b3961ad32bed</raw>
          <raw bits="8" desc="16. hash code type (SIGHASH_ALL)">01</raw>
          <raw bits="8" desc="16. OPCODE containing the length of the public key of signer">21</raw>
          <raw bits="264-520" desc="16. public key of signer">03626147c2b5ee2efd660c313f6def44665c7260e69b1a4144946e8bc6efe89034</raw>
        </sigscript>
        <raw bits="32" desc="7. sequence. This is currently always set to 0xffffffff">ffffffff</raw>
      </output>
    </outputs>
  </txin>
  <txin>
    <raw bits="256" id="180d08561d4f85e22bfcde890a17f353250c302e995042a1e42b226984e3e9da" desc="3. transaction id from which we want to redeem an output (reverse order of @id)">dae9e38469222be4a14250992e300c2553f3170a89defc2be2854f1d56080d18</raw>
    <outputs>
      <output address="1DESJbwXNkqbFWuTnygNnGWtzz85KNSfKm" value="3000" desc="(provide BTC address and decimal value in satoshis)">
        <raw bits="32" desc="4. output index we want to redeem from the transaction">01000000</raw>
        <raw bits="8" nullvalue="00" desc="5. For the purpose of signing the transaction, length of scriptPubKey of the outpoint. After signing, length of sigscript">6a</raw>
        <pkscript>
          <raw bits="8" desc="OP_DUP">76</raw>
          <raw bits="8" desc="OP_HASH160">a9</raw>
          <raw bits="8" desc="push 0x14 bytes">14</raw>
          <raw bits="160" desc="(pubkeyhash)">862c0a08e5aa3e1ea796a85f9af376848c0352c7</raw>
          <raw bits="8" desc="OP_EQUALVERIFY">88</raw>
          <raw bits="8" desc="OP_CHECKSIG">ac</raw>
        </pkscript>
        <sigscript>
          <raw bits="8" desc="16. OPCODE containing the length of the DER-encoded signature plus the one-byte hash code type">47</raw>
          <raw bits="?" desc="15. create ECDSA signature">3044022003d84a2c43eb4d70c6308b018c0ad807a59ebef5bd04759d762fcdb81792073c02205e81c012a6278b38aa75ba656187c1ec27dd2652c2de44ce991d696af15db1ec</raw>
          <raw bits="8" desc="16. hash code type (SIGHASH_ALL)">01</raw>
          <raw bits="8" desc="16. OPCODE containing the length of the public key of signer">21</raw>
          <raw bits="264-520" desc="16. public key of signer">03f36bd219c0109194ef262a83db8a725f2e96ae316d55104d7c9665a401b3f552</raw>
        </sigscript>
        <raw bits="32" desc="7. sequence. This is currently always set to 0xffffffff">ffffffff</raw>
      </output>
    </outputs>
  </txin>
  <txin>
    <raw bits="256" id="18d7100c870deb63dec258282f5ff150ebc64e4497d107073503fb4343f4810d" desc="3. transaction id from which we want to redeem an output (reverse order of @id)">0d81f44343fb03350707d197444ec6eb50f15f2f2858c2de63eb0d870c10d718</raw>
    <outputs>
      <output address="1HangpEdoDsSe5i3n7DQNbYie65PGGmPcq" value="800" desc="(provide BTC address and decimal value in satoshis)">
        <raw bits="32" desc="4. output index we want to redeem from the transaction">00000000</raw>
        <raw bits="8" nullvalue="00" desc="5. For the purpose of signing the transaction, length of scriptPubKey of the outpoint. After signing, length of sigscript">6a</raw>
        <pkscript>
          <raw bits="8" desc="OP_DUP">76</raw>
          <raw bits="8" desc="OP_HASH160">a9</raw>
          <raw bits="8" desc="push 0x14 bytes">14</raw>
          <raw bits="160" desc="(pubkeyhash)">b5e5e05c83c470ffd21c3330fb99a6a0101351ad</raw>
          <raw bits="8" desc="OP_EQUALVERIFY">88</raw>
          <raw bits="8" desc="OP_CHECKSIG">ac</raw>
        </pkscript>
        <sigscript>
          <raw bits="8" desc="16. OPCODE containing the length of the DER-encoded signature plus the one-byte hash code type">47</raw>
          <raw bits="?" desc="15. create ECDSA signature">304402207d5aba19cadebfd3c4077c083b78da641ae3cf8b007437a30f6fc4ce394e7a3e022040f1169b6a61f869b2eeba93e41367f852fcee6b0b29beaf726f6a3f8a00c658</raw>
          <raw bits="8" desc="16. hash code type (SIGHASH_ALL)">01</raw>
          <raw bits="8" desc="16. OPCODE containing the length of the public key of signer">21</raw>
          <raw bits="264-520" desc="16. public key of signer">036330ff88c4066c4b9f724140eeb58f876fd4221bed999a5a149cdbbf1b32687f</raw>
        </sigscript>
        <raw bits="32" desc="7. sequence. This is currently always set to 0xffffffff">ffffffff</raw>
      </output>
    </outputs>
  </txin>
  <txin>
    <raw bits="256" id="18d7100c870deb63dec258282f5ff150ebc64e4497d107073503fb4343f4810d" desc="3. transaction id from which we want to redeem an output (reverse order of @id)">0d81f44343fb03350707d197444ec6eb50f15f2f2858c2de63eb0d870c10d718</raw>
    <outputs>
      <output address="1HaXuSmR7PXhR4GCcyvGC7USYDuDjw6FHw" value="900" desc="(provide BTC address and decimal value in satoshis)">
        <raw bits="32" desc="4. output index we want to redeem from the transaction">01000000</raw>
        <raw bits="8" nullvalue="00" desc="5. For the purpose of signing the transaction, length of scriptPubKey of the outpoint. After signing, length of sigscript">19</raw>
        <pkscript>
          <raw bits="8" desc="OP_DUP">76</raw>
          <raw bits="8" desc="OP_HASH160">a9</raw>
          <raw bits="8" desc="push 0x14 bytes">14</raw>
          <raw bits="160" desc="(pubkeyhash)">b5d9896cc07a30e1d739097df0c1d47181cbbe75</raw>
          <raw bits="8" desc="OP_EQUALVERIFY">88</raw>
          <raw bits="8" desc="OP_CHECKSIG">ac</raw>
        </pkscript>
        <raw bits="32" desc="7. sequence. This is currently always set to 0xffffffff">ffffffff</raw>
      </output>
    </outputs>
  </txin>
  <txout>
    <outputs>
      <raw bits="8" desc="8. varint containing the number of outputs in our new transaction">01</raw>
      <output address="1DimgxZjRiRNryKjfV7AoZkJdgAWJp2rMb" value="4000" desc="(provide BTC address and decimal value in satoshis)">
        <raw bits="64" desc="9. (64 bit integer, little-endian) amount (in satoshis) we want to redeem from the specified outputs for this recipient address">a00f000000000000</raw>
        <raw bits="8" desc="10. length of the output script (0x19)">19</raw>
        <pkscript>
          <raw bits="8" desc="11. (OP_DUP)">76</raw>
          <raw bits="8" desc="11. (OP_HASH160)">a9</raw>
          <raw bits="8" desc="11. (push hex 0x14 bytes on stack)">14</raw>
          <raw bits="160" desc="11. Then we write the pubkeyhash of the recipient">8b87de479525eeea5af53cde43eafe3b5407072d</raw>
          <raw bits="8" desc="11. (OP_EQUALVERIFY)">88</raw>
          <raw bits="8" desc="11. (OP_CHECKSIG)">ac</raw>
        </pkscript>
      </output>
      <raw bits="32" desc="12. lock time">00000000</raw>
      <raw iteration="1" bits="32" desc="13. Iteration 1: hash code type / Iteration 2: We finish off by removing the four-byte hash code type we added in step 13">01000000</raw>
    </outputs>
  </txout>
  <template>
    <sigscript desc="14. double-SHA256 hash this entire structure (from iteration 1). This will be the input to the signing.">
      <raw bits="8" desc="16. OPCODE containing the length of the DER-encoded signature plus the one-byte hash code type"/>
      <raw bits="?" desc="15. create ECDSA signature"/>
      <raw bits="8" desc="16. hash code type (SIGHASH_ALL)">01</raw>
      <raw bits="8" desc="16. OPCODE containing the length of the public key of signer"/>
      <raw bits="264-520" desc="16. public key of signer"/>
    </sigscript>
  </template>
</txs>
Above you see the content of xml file: /tmp/tmp.Wu4EIYo6AF
txid: ddf4fb2babc6b0e691c9e015c1b21dd98f81b19e9e6ae1563eb25e5b89be66f5
signedtransaction: 0100000004dae9e38469222be4a14250992e300c2553f3170a89defc2be2854f1d56080d18000000006a47304402207ab181921502cdca970147312b22fc7391a411f099ba4f2321bd9c2b3a9b3e8f02205f3213af78fdca8a90fb9e5e8f22d6158834572017d415e86787b3961ad32bed012103626147c2b5ee2efd660c313f6def44665c7260e69b1a4144946e8bc6efe89034ffffffffdae9e38469222be4a14250992e300c2553f3170a89defc2be2854f1d56080d18010000006a473044022003d84a2c43eb4d70c6308b018c0ad807a59ebef5bd04759d762fcdb81792073c02205e81c012a6278b38aa75ba656187c1ec27dd2652c2de44ce991d696af15db1ec012103f36bd219c0109194ef262a83db8a725f2e96ae316d55104d7c9665a401b3f552ffffffff0d81f44343fb03350707d197444ec6eb50f15f2f2858c2de63eb0d870c10d718000000006a47304402207d5aba19cadebfd3c4077c083b78da641ae3cf8b007437a30f6fc4ce394e7a3e022040f1169b6a61f869b2eeba93e41367f852fcee6b0b29beaf726f6a3f8a00c6580121036330ff88c4066c4b9f724140eeb58f876fd4221bed999a5a149cdbbf1b32687fffffffff0d81f44343fb03350707d197444ec6eb50f15f2f2858c2de63eb0d870c10d718010000001976a914b5d9896cc07a30e1d739097df0c1d47181cbbe7588acffffffff01a00f0000000000001976a9148b87de479525eeea5af53cde43eafe3b5407072d88ac00000000                                                                                                                                                                         
For verification, paste your signedtransaction into https://blockchain.com/btc/decode-tx and check if everything looks as you planned.
After verification, paste your signedtransaction into https://blockchain.com/btc/pushtx to broadcast it.
Once you have successfully broadcast your tansaction, watch its status on the blockchain: https://blockchain.com/btc/tx/ddf4fb2babc6b0e691c9e015c1b21dd98f81b19e9e6ae1563eb25e5b89be66f5.

~/$ <<<KyX4kk32ro6QXdt9Hb9P6QVaEdJGNaAjXACKckTBB1KQrkWXL2Sq offline/sign2.sh /tmp/tmp.Wu4EIYo6AF 4
Press ctrl-d when you are done entering the private key in wallet input format (ignore this message if you've piped the private key through STDIN)
totalsatoshis: 4000 (decimal)
fee: 1700
rawtransaction: 0100000004dae9e38469222be4a14250992e300c2553f3170a89defc2be2854f1d56080d180000000000ffffffffdae9e38469222be4a14250992e300c2553f3170a89defc2be2854f1d56080d180100000000ffffffff0d81f44343fb03350707d197444ec6eb50f15f2f2858c2de63eb0d870c10d7180000000000ffffffff0d81f44343fb03350707d197444ec6eb50f15f2f2858c2de63eb0d870c10d718010000001976a914b5d9896cc07a30e1d739097df0c1d47181cbbe7588acffffffff01a00f0000000000001976a9148b87de479525eeea5af53cde43eafe3b5407072d88ac0000000001000000
rawtransactionhash: fe558a1e1917b5625b789a7478623998b9cf4b95e9528a7c059db8dead8615ef
signedrawtransaction: 304402202819c2bfd2871facbded5f2388b60bb4c6c54bab343e84eb8f4fee07bb70c58202201b5463b2b28ce3119fce135883c8246805c30d0485c3366b5e5734f6b4001d88
publickey: 03bc5f53e846daacd7f414e15458eeab1fa89c7f3426fe3b9978744f7f97285db9
verifytransaction: Signature Verified Successfully
sigscript: 47304402202819c2bfd2871facbded5f2388b60bb4c6c54bab343e84eb8f4fee07bb70c58202201b5463b2b28ce3119fce135883c8246805c30d0485c3366b5e5734f6b4001d88012103bc5f53e846daacd7f414e15458eeab1fa89c7f3426fe3b9978744f7f97285db9
<txs type="P2PKH">
  <raw bits="32" desc="1. version">01000000</raw>
  <raw bits="8" desc="2. varint specifying the number of inputs">04</raw>
  <txin>
    <raw bits="256" id="180d08561d4f85e22bfcde890a17f353250c302e995042a1e42b226984e3e9da" desc="3. transaction id from which we want to redeem an output (reverse order of @id)">dae9e38469222be4a14250992e300c2553f3170a89defc2be2854f1d56080d18</raw>
    <outputs>
      <output address="1FaqXRmQiYyGizWS9fK3GN6Y9GeSxPyRt1" value="1000" desc="(provide BTC address and decimal value in satoshis)">
        <raw bits="32" desc="4. output index we want to redeem from the transaction">00000000</raw>
        <raw bits="8" nullvalue="00" desc="5. For the purpose of signing the transaction, length of scriptPubKey of the outpoint. After signing, length of sigscript">6a</raw>
        <pkscript>
          <raw bits="8" desc="OP_DUP">76</raw>
          <raw bits="8" desc="OP_HASH160">a9</raw>
          <raw bits="8" desc="push 0x14 bytes">14</raw>
          <raw bits="160" desc="(pubkeyhash)">9ff7fe77800570e8959bb953f4380ea442cb7f32</raw>
          <raw bits="8" desc="OP_EQUALVERIFY">88</raw>
          <raw bits="8" desc="OP_CHECKSIG">ac</raw>
        </pkscript>
        <sigscript>
          <raw bits="8" desc="16. OPCODE containing the length of the DER-encoded signature plus the one-byte hash code type">47</raw>
          <raw bits="?" desc="15. create ECDSA signature">304402207ab181921502cdca970147312b22fc7391a411f099ba4f2321bd9c2b3a9b3e8f02205f3213af78fdca8a90fb9e5e8f22d6158834572017d415e86787b3961ad32bed</raw>
          <raw bits="8" desc="16. hash code type (SIGHASH_ALL)">01</raw>
          <raw bits="8" desc="16. OPCODE containing the length of the public key of signer">21</raw>
          <raw bits="264-520" desc="16. public key of signer">03626147c2b5ee2efd660c313f6def44665c7260e69b1a4144946e8bc6efe89034</raw>
        </sigscript>
        <raw bits="32" desc="7. sequence. This is currently always set to 0xffffffff">ffffffff</raw>
      </output>
    </outputs>
  </txin>
  <txin>
    <raw bits="256" id="180d08561d4f85e22bfcde890a17f353250c302e995042a1e42b226984e3e9da" desc="3. transaction id from which we want to redeem an output (reverse order of @id)">dae9e38469222be4a14250992e300c2553f3170a89defc2be2854f1d56080d18</raw>
    <outputs>
      <output address="1DESJbwXNkqbFWuTnygNnGWtzz85KNSfKm" value="3000" desc="(provide BTC address and decimal value in satoshis)">
        <raw bits="32" desc="4. output index we want to redeem from the transaction">01000000</raw>
        <raw bits="8" nullvalue="00" desc="5. For the purpose of signing the transaction, length of scriptPubKey of the outpoint. After signing, length of sigscript">6a</raw>
        <pkscript>
          <raw bits="8" desc="OP_DUP">76</raw>
          <raw bits="8" desc="OP_HASH160">a9</raw>
          <raw bits="8" desc="push 0x14 bytes">14</raw>
          <raw bits="160" desc="(pubkeyhash)">862c0a08e5aa3e1ea796a85f9af376848c0352c7</raw>
          <raw bits="8" desc="OP_EQUALVERIFY">88</raw>
          <raw bits="8" desc="OP_CHECKSIG">ac</raw>
        </pkscript>
        <sigscript>
          <raw bits="8" desc="16. OPCODE containing the length of the DER-encoded signature plus the one-byte hash code type">47</raw>
          <raw bits="?" desc="15. create ECDSA signature">3044022003d84a2c43eb4d70c6308b018c0ad807a59ebef5bd04759d762fcdb81792073c02205e81c012a6278b38aa75ba656187c1ec27dd2652c2de44ce991d696af15db1ec</raw>
          <raw bits="8" desc="16. hash code type (SIGHASH_ALL)">01</raw>
          <raw bits="8" desc="16. OPCODE containing the length of the public key of signer">21</raw>
          <raw bits="264-520" desc="16. public key of signer">03f36bd219c0109194ef262a83db8a725f2e96ae316d55104d7c9665a401b3f552</raw>
        </sigscript>
        <raw bits="32" desc="7. sequence. This is currently always set to 0xffffffff">ffffffff</raw>
      </output>
    </outputs>
  </txin>
  <txin>
    <raw bits="256" id="18d7100c870deb63dec258282f5ff150ebc64e4497d107073503fb4343f4810d" desc="3. transaction id from which we want to redeem an output (reverse order of @id)">0d81f44343fb03350707d197444ec6eb50f15f2f2858c2de63eb0d870c10d718</raw>
    <outputs>
      <output address="1HangpEdoDsSe5i3n7DQNbYie65PGGmPcq" value="800" desc="(provide BTC address and decimal value in satoshis)">
        <raw bits="32" desc="4. output index we want to redeem from the transaction">00000000</raw>
        <raw bits="8" nullvalue="00" desc="5. For the purpose of signing the transaction, length of scriptPubKey of the outpoint. After signing, length of sigscript">6a</raw>
        <pkscript>
          <raw bits="8" desc="OP_DUP">76</raw>
          <raw bits="8" desc="OP_HASH160">a9</raw>
          <raw bits="8" desc="push 0x14 bytes">14</raw>
          <raw bits="160" desc="(pubkeyhash)">b5e5e05c83c470ffd21c3330fb99a6a0101351ad</raw>
          <raw bits="8" desc="OP_EQUALVERIFY">88</raw>
          <raw bits="8" desc="OP_CHECKSIG">ac</raw>
        </pkscript>
        <sigscript>
          <raw bits="8" desc="16. OPCODE containing the length of the DER-encoded signature plus the one-byte hash code type">47</raw>
          <raw bits="?" desc="15. create ECDSA signature">304402207d5aba19cadebfd3c4077c083b78da641ae3cf8b007437a30f6fc4ce394e7a3e022040f1169b6a61f869b2eeba93e41367f852fcee6b0b29beaf726f6a3f8a00c658</raw>
          <raw bits="8" desc="16. hash code type (SIGHASH_ALL)">01</raw>
          <raw bits="8" desc="16. OPCODE containing the length of the public key of signer">21</raw>
          <raw bits="264-520" desc="16. public key of signer">036330ff88c4066c4b9f724140eeb58f876fd4221bed999a5a149cdbbf1b32687f</raw>
        </sigscript>
        <raw bits="32" desc="7. sequence. This is currently always set to 0xffffffff">ffffffff</raw>
      </output>
    </outputs>
  </txin>
  <txin>
    <raw bits="256" id="18d7100c870deb63dec258282f5ff150ebc64e4497d107073503fb4343f4810d" desc="3. transaction id from which we want to redeem an output (reverse order of @id)">0d81f44343fb03350707d197444ec6eb50f15f2f2858c2de63eb0d870c10d718</raw>
    <outputs>
      <output address="1HaXuSmR7PXhR4GCcyvGC7USYDuDjw6FHw" value="900" desc="(provide BTC address and decimal value in satoshis)">
        <raw bits="32" desc="4. output index we want to redeem from the transaction">01000000</raw>
        <raw bits="8" nullvalue="00" desc="5. For the purpose of signing the transaction, length of scriptPubKey of the outpoint. After signing, length of sigscript">6a</raw>
        <pkscript>
          <raw bits="8" desc="OP_DUP">76</raw>
          <raw bits="8" desc="OP_HASH160">a9</raw>
          <raw bits="8" desc="push 0x14 bytes">14</raw>
          <raw bits="160" desc="(pubkeyhash)">b5d9896cc07a30e1d739097df0c1d47181cbbe75</raw>
          <raw bits="8" desc="OP_EQUALVERIFY">88</raw>
          <raw bits="8" desc="OP_CHECKSIG">ac</raw>
        </pkscript>
        <sigscript>
          <raw bits="8" desc="16. OPCODE containing the length of the DER-encoded signature plus the one-byte hash code type">47</raw>
          <raw bits="?" desc="15. create ECDSA signature">304402202819c2bfd2871facbded5f2388b60bb4c6c54bab343e84eb8f4fee07bb70c58202201b5463b2b28ce3119fce135883c8246805c30d0485c3366b5e5734f6b4001d88</raw>
          <raw bits="8" desc="16. hash code type (SIGHASH_ALL)">01</raw>
          <raw bits="8" desc="16. OPCODE containing the length of the public key of signer">21</raw>
          <raw bits="264-520" desc="16. public key of signer">03bc5f53e846daacd7f414e15458eeab1fa89c7f3426fe3b9978744f7f97285db9</raw>
        </sigscript>
        <raw bits="32" desc="7. sequence. This is currently always set to 0xffffffff">ffffffff</raw>
      </output>
    </outputs>
  </txin>
  <txout>
    <outputs>
      <raw bits="8" desc="8. varint containing the number of outputs in our new transaction">01</raw>
      <output address="1DimgxZjRiRNryKjfV7AoZkJdgAWJp2rMb" value="4000" desc="(provide BTC address and decimal value in satoshis)">
        <raw bits="64" desc="9. (64 bit integer, little-endian) amount (in satoshis) we want to redeem from the specified outputs for this recipient address">a00f000000000000</raw>
        <raw bits="8" desc="10. length of the output script (0x19)">19</raw>
        <pkscript>
          <raw bits="8" desc="11. (OP_DUP)">76</raw>
          <raw bits="8" desc="11. (OP_HASH160)">a9</raw>
          <raw bits="8" desc="11. (push hex 0x14 bytes on stack)">14</raw>
          <raw bits="160" desc="11. Then we write the pubkeyhash of the recipient">8b87de479525eeea5af53cde43eafe3b5407072d</raw>
          <raw bits="8" desc="11. (OP_EQUALVERIFY)">88</raw>
          <raw bits="8" desc="11. (OP_CHECKSIG)">ac</raw>
        </pkscript>
      </output>
      <raw bits="32" desc="12. lock time">00000000</raw>
      <raw iteration="1" bits="32" desc="13. Iteration 1: hash code type / Iteration 2: We finish off by removing the four-byte hash code type we added in step 13">01000000</raw>
    </outputs>
  </txout>
  <template>
    <sigscript desc="14. double-SHA256 hash this entire structure (from iteration 1). This will be the input to the signing.">
      <raw bits="8" desc="16. OPCODE containing the length of the DER-encoded signature plus the one-byte hash code type"/>
      <raw bits="?" desc="15. create ECDSA signature"/>
      <raw bits="8" desc="16. hash code type (SIGHASH_ALL)">01</raw>
      <raw bits="8" desc="16. OPCODE containing the length of the public key of signer"/>
      <raw bits="264-520" desc="16. public key of signer"/>
    </sigscript>
  </template>
</txs>
Above you see the content of xml file: /tmp/tmp.4KJ95LWsaQ
txid: cc25265685849f446946a0e4269c923e3db66cb8d8cb29f0bbe257204712f13b
signedtransaction: 0100000004dae9e38469222be4a14250992e300c2553f3170a89defc2be2854f1d56080d18000000006a47304402207ab181921502cdca970147312b22fc7391a411f099ba4f2321bd9c2b3a9b3e8f02205f3213af78fdca8a90fb9e5e8f22d6158834572017d415e86787b3961ad32bed012103626147c2b5ee2efd660c313f6def44665c7260e69b1a4144946e8bc6efe89034ffffffffdae9e38469222be4a14250992e300c2553f3170a89defc2be2854f1d56080d18010000006a473044022003d84a2c43eb4d70c6308b018c0ad807a59ebef5bd04759d762fcdb81792073c02205e81c012a6278b38aa75ba656187c1ec27dd2652c2de44ce991d696af15db1ec012103f36bd219c0109194ef262a83db8a725f2e96ae316d55104d7c9665a401b3f552ffffffff0d81f44343fb03350707d197444ec6eb50f15f2f2858c2de63eb0d870c10d718000000006a47304402207d5aba19cadebfd3c4077c083b78da641ae3cf8b007437a30f6fc4ce394e7a3e022040f1169b6a61f869b2eeba93e41367f852fcee6b0b29beaf726f6a3f8a00c6580121036330ff88c4066c4b9f724140eeb58f876fd4221bed999a5a149cdbbf1b32687fffffffff0d81f44343fb03350707d197444ec6eb50f15f2f2858c2de63eb0d870c10d718010000006a47304402202819c2bfd2871facbded5f2388b60bb4c6c54bab343e84eb8f4fee07bb70c58202201b5463b2b28ce3119fce135883c8246805c30d0485c3366b5e5734f6b4001d88012103bc5f53e846daacd7f414e15458eeab1fa89c7f3426fe3b9978744f7f97285db9ffffffff01a00f0000000000001976a9148b87de479525eeea5af53cde43eafe3b5407072d88ac00000000       
For verification, paste your signedtransaction into https://blockchain.com/btc/decode-tx and check if everything looks as you planned.
After verification, paste your signedtransaction into https://blockchain.com/btc/pushtx to broadcast it.
Once you have successfully broadcast your tansaction, watch its status on the blockchain: https://blockchain.com/btc/tx/cc25265685849f446946a0e4269c923e3db66cb8d8cb29f0bbe257204712f13b.

